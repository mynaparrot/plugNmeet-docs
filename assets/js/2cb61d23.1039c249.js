"use strict";(self.webpackChunkplugnmeet_documentation=self.webpackChunkplugnmeet_documentation||[]).push([[308],{5161:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"others/webhooks","title":"Webhooks","description":"plugNmeet webhooks","source":"@site/docs/others/webhooks.md","sourceDirName":"others","slug":"/others/webhooks","permalink":"/docs/others/webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/mynaparrot/plugNmeet-docs/edit/main/docs/others/webhooks.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"plugNmeet webhooks","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Analytics data","permalink":"/docs/others/analytics"}}');var i=o(6070),r=o(3784);const s={description:"plugNmeet webhooks",sidebar_position:2},d="Webhooks",c={},a=[{value:"Receiving webhooks",id:"receiving-webhooks",level:2},{value:"Events",id:"events",level:2},{value:"Room created",id:"room-created",level:3},{value:"Room started",id:"room-started",level:3},{value:"Room finished",id:"room-finished",level:3},{value:"Participant joined",id:"participant-joined",level:3},{value:"Participant left",id:"participant-left",level:3},{value:"Track Published",id:"track-published",level:3},{value:"Track Unpublished",id:"track-unpublished",level:3},{value:"Recording started",id:"recording-started",level:3},{value:"Recording ended",id:"recording-ended",level:3},{value:"Recording proceeded",id:"recording-proceeded",level:3},{value:"RTMP started",id:"rtmp-started",level:3},{value:"RTMP ended",id:"rtmp-ended",level:3},{value:"Speech to text session started",id:"speech-to-text-session-started",level:3},{value:"Speech to text session ended",id:"speech-to-text-session-ended",level:3},{value:"Speech to text total usage",id:"speech-to-text-total-usage",level:3},{value:"Analytics proceeded",id:"analytics-proceeded",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,i.jsx)(n.p,{children:"plugNmeet will notify different events to the provided URL. This URL can be added in server configuration or during create room."}),"\n",(0,i.jsx)(n.h2,{id:"receiving-webhooks",children:"Receiving webhooks"}),"\n",(0,i.jsxs)(n.p,{children:["Webhook requests are HTTP POST requests sent to URLs that you had configured either in server ",(0,i.jsx)(n.code,{children:"config.yml"})," file or during create room. A WebhookEvent is encoded as JSON and sent in the body of the request."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"Content-Type"})," header of the request is set to ",(0,i.jsx)(n.code,{children:"application/webhook+json"}),". Please ensure your webserver is configured to receive payloads with this content type."]}),"\n",(0,i.jsxs)(n.p,{children:["plugNmeet will use same security pattern that livekit is following. In order to ensure webhook requests are coming from plugNmeet, these requests has ",(0,i.jsx)(n.code,{children:"Authorization"})," and ",(0,i.jsx)(n.code,{children:"Hash-Token"})," headers containing a signed JWT token. The token includes a ",(0,i.jsx)(n.code,{children:"sha256"})," hash of the payload. You can quickly have a look example in PHP from ",(0,i.jsx)(n.a,{href:"https://github.com/mynaparrot/plugNmeet-sdk-php/blob/main/examples/webhook.php",children:"webhook.php"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.p,{children:["You can review the code from ",(0,i.jsx)(n.a,{href:"https://github.com/mynaparrot/plugnmeet-protocol/blob/main/proto_files/plugnmeet_common.proto#L8C9-L8C26",children:"here"}),".\nIn addition to the fields below, all webhook events will include the following fields:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"})," - a UUID identifying the event"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"createdAt"})," - UNIX timestamp in seconds"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"room-created",children:"Room created"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_created'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"room-started",children:"Room started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_started'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"room-finished",children:"Room finished"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_finished'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"participant-joined",children:"Participant joined"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'participant_joined'\n  room: Room\n  participant: ParticipantInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"participant-left",children:"Participant left"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'participant_left'\n  room: Room\n  participant: ParticipantInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"track-published",children:"Track Published"}),"\n",(0,i.jsx)(n.p,{children:"In the Room and Participant objects, only sid, identity, and name are sent."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'track_published'\n  room: Room\n  participant: ParticipantInfo\n  track: TrackInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"track-unpublished",children:"Track Unpublished"}),"\n",(0,i.jsx)(n.p,{children:"In the Room and Participant objects, only sid, identity, and name are sent."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'track_unpublished'\n  room: Room\n  participant: ParticipantInfo\n  track: TrackInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-started",children:"Recording started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'start_recording'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-ended",children:"Recording ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'end_recording'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-proceeded",children:"Recording proceeded"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'recording_proceeded'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rtmp-started",children:"RTMP started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'start_rtmp'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rtmp-ended",children:"RTMP ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'end_rtmp'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"speech-to-text-session-started",children:"Speech to text session started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'speech_to_text_session_started'\n  room: Room\n  speech_service: SpeechServiceEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"speech-to-text-session-ended",children:"Speech to text session ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'speech_to_text_session_ended'\n  room: Room\n  speech_service: SpeechServiceEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"speech-to-text-total-usage",children:"Speech to text total usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'speech_to_text_total_usage'\n  room: Room\n  speech_service: SpeechServiceEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"analytics-proceeded",children:"Analytics proceeded"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'analytics_proceeded'\n  room: Room\n  analytics: AnalyticsEvent\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},3784:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>d});var t=o(758);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);