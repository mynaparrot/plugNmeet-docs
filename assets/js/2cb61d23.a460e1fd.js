"use strict";(self.webpackChunkplugnmeet_documentation=self.webpackChunkplugnmeet_documentation||[]).push([[308],{2665:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"others/webhooks","title":"Webhooks","description":"plugNmeet webhooks","source":"@site/docs/others/webhooks.md","sourceDirName":"others","slug":"/others/webhooks","permalink":"/docs/others/webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/mynaparrot/plugNmeet-docs/edit/main/docs/others/webhooks.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"description":"plugNmeet webhooks","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Analytics data","permalink":"/docs/others/analytics"}}');var i=o(5813),r=o(5880);const s={description:"plugNmeet webhooks",sidebar_position:2},d="Webhooks",c={},a=[{value:"Receiving Webhooks",id:"receiving-webhooks",level:2},{value:"Events",id:"events",level:2},{value:"Room Created",id:"room-created",level:3},{value:"Room Started",id:"room-started",level:3},{value:"Room Finished",id:"room-finished",level:3},{value:"Participant Joined",id:"participant-joined",level:3},{value:"Participant Left",id:"participant-left",level:3},{value:"Track Published",id:"track-published",level:3},{value:"Track Unpublished",id:"track-unpublished",level:3},{value:"Recording Started",id:"recording-started",level:3},{value:"Recording Ended",id:"recording-ended",level:3},{value:"Recording Proceeded",id:"recording-proceeded",level:3},{value:"RTMP Started",id:"rtmp-started",level:3},{value:"RTMP Ended",id:"rtmp-ended",level:3},{value:"Speech-to-Text Session Started",id:"speech-to-text-session-started",level:3},{value:"Speech-to-Text Session Ended",id:"speech-to-text-session-ended",level:3},{value:"Speech-to-Text Total Usage",id:"speech-to-text-total-usage",level:3},{value:"Analytics Proceeded",id:"analytics-proceeded",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,i.jsx)(n.p,{children:"Plug-N-Meet can notify your application about various events by sending webhook requests to a specified URL. You can configure this URL in the server settings or provide it when creating a room."}),"\n",(0,i.jsx)(n.h2,{id:"receiving-webhooks",children:"Receiving Webhooks"}),"\n",(0,i.jsxs)(n.p,{children:["Webhook requests are sent as HTTP POST requests to the URLs you have configured, either in the server's ",(0,i.jsx)(n.code,{children:"config.yml"})," file or during room creation. Each webhook event is encoded as JSON and included in the request body."]}),"\n",(0,i.jsxs)(n.p,{children:["The request will have the ",(0,i.jsx)(n.code,{children:"Content-Type"})," header set to ",(0,i.jsx)(n.code,{children:"application/webhook+json"}),". Make sure your web server is configured to accept payloads with this content type."]}),"\n",(0,i.jsxs)(n.p,{children:["Plug-N-Meet uses the same security pattern as LiveKit. To verify that webhook requests originate from Plug-N-Meet, each request includes ",(0,i.jsx)(n.code,{children:"Authorization"})," and ",(0,i.jsx)(n.code,{children:"Hash-Token"})," headers containing a signed JWT token. The token includes a SHA256 hash of the payload. For a PHP example, see ",(0,i.jsx)(n.a,{href:"https://github.com/mynaparrot/plugNmeet-sdk-php/blob/main/examples/webhook.php",children:"webhook.php"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.p,{children:["You can review the event definitions ",(0,i.jsx)(n.a,{href:"https://github.com/mynaparrot/plugnmeet-protocol/blob/main/proto_files/plugnmeet_common.proto#L8C9-L8C26",children:"here"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"All webhook events include the following fields:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"}),": A UUID identifying the event"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"createdAt"}),": UNIX timestamp in seconds"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"room-created",children:"Room Created"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_created'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"room-started",children:"Room Started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_started'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"room-finished",children:"Room Finished"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_finished'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"participant-joined",children:"Participant Joined"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'participant_joined'\n  room: Room\n  participant: ParticipantInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"participant-left",children:"Participant Left"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'participant_left'\n  room: Room\n  participant: ParticipantInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"track-published",children:"Track Published"}),"\n",(0,i.jsxs)(n.p,{children:["Only ",(0,i.jsx)(n.code,{children:"sid"}),", ",(0,i.jsx)(n.code,{children:"identity"}),", and ",(0,i.jsx)(n.code,{children:"name"})," are included in the Room and Participant objects."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'track_published'\n  room: Room\n  participant: ParticipantInfo\n  track: TrackInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"track-unpublished",children:"Track Unpublished"}),"\n",(0,i.jsxs)(n.p,{children:["Only ",(0,i.jsx)(n.code,{children:"sid"}),", ",(0,i.jsx)(n.code,{children:"identity"}),", and ",(0,i.jsx)(n.code,{children:"name"})," are included in the Room and Participant objects."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'track_unpublished'\n  room: Room\n  participant: ParticipantInfo\n  track: TrackInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-started",children:"Recording Started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'start_recording'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-ended",children:"Recording Ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'end_recording'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-proceeded",children:"Recording Proceeded"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'recording_proceeded'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rtmp-started",children:"RTMP Started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'start_rtmp'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rtmp-ended",children:"RTMP Ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'end_rtmp'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"speech-to-text-session-started",children:"Speech-to-Text Session Started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'speech_to_text_session_started'\n  room: Room\n  speech_service: SpeechServiceEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"speech-to-text-session-ended",children:"Speech-to-Text Session Ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'speech_to_text_session_ended'\n  room: Room\n  speech_service: SpeechServiceEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"speech-to-text-total-usage",children:"Speech-to-Text Total Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'speech_to_text_total_usage'\n  room: Room\n  speech_service: SpeechServiceEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"analytics-proceeded",children:"Analytics Proceeded"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'analytics_proceeded'\n  room: Room\n  analytics: AnalyticsEvent\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},5880:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>d});var t=o(9729);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);