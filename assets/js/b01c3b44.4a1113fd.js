"use strict";(self.webpackChunkplugnmeet_documentation=self.webpackChunkplugnmeet_documentation||[]).push([[1322],{44938:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var o=t(81336),i=t(35656),a=t(77365);const s={title:"A Developer's Guide: How to Build Your First Automated Workflow with Webhooks",slug:"how-to-build-your-first-webhook-workflow",authors:["bob","jibon"],tags:["tutorial","how-to","webhooks","automation","developer","api","integration","security"]},r=void 0,l={authorsImageUrls:[void 0,void 0]},d=[{value:"The Goal",id:"the-goal",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Setting Up Your Endpoint",id:"step-1-setting-up-your-endpoint",level:3},{value:"Step 2: Secure Your Endpoint with Signature Validation",id:"step-2-secure-your-endpoint-with-signature-validation",level:3},{value:"Step 3: Handle Different Events",id:"step-3-handle-different-events",level:3},{value:"Use Case 1: Basic Billing &amp; Analytics",id:"use-case-1-basic-billing--analytics",level:4},{value:"Use Case 2: Advanced AI Cost &amp; Usage Tracking",id:"use-case-2-advanced-ai-cost--usage-tracking",level:4},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"You've set up your video conferencing service, but now you want to make it smarter. What if you could automatically log the duration of every meeting for billing? Or get a Slack notification when a VIP joins a call? This is where webhooks come in."}),"\n",(0,i.jsx)(n.p,{children:"This guide will walk you through building your very first automated workflow. We'll create a simple but powerful service that listens for a meeting to end and logs its duration to your console\u2014a perfect starting point for a real-world billing or analytics system."}),"\n",(0,i.jsxs)(n.p,{children:["For more high-level ideas on what's possible, check out our companion post on ",(0,i.jsx)(n.a,{href:"/blog/powerful-workflows-with-webhooks",children:"5 Powerful Workflows You Can Build with Webhooks"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"the-goal",children:"The Goal"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this tutorial, you will have a simple webhook listener that can:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Securely validate and receive events from your Plug-N-Meet server."}),"\n",(0,i.jsx)(n.li,{children:"Calculate the duration of a meeting when it ends."}),"\n",(0,i.jsx)(n.li,{children:"Differentiate between different types of AI-generated artifacts."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A running Plug-N-Meet server with your ",(0,i.jsx)(n.code,{children:"API_KEY"})," and ",(0,i.jsx)(n.code,{children:"API_SECRET"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["An application endpoint (URL) ready to receive ",(0,i.jsx)(n.code,{children:"POST"})," requests."]}),"\n",(0,i.jsx)(n.li,{children:"Node.js and a basic understanding of Express."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-1-setting-up-your-endpoint",children:"Step 1: Setting Up Your Endpoint"}),"\n",(0,i.jsxs)(n.p,{children:["First, tell Plug-N-Meet where to send the events. Open your ",(0,i.jsx)(n.code,{children:"config.yaml"})," file on your server and add the ",(0,i.jsx)(n.code,{children:"webhook_conf"})," section."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'webhook_conf:\n  # Set to true to enable webhooks globally.\n  enable: true\n  # The primary URL where all events will be sent.\n  url: "https://yourapp.com/webhook-listener"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Save the file and ",(0,i.jsx)(n.strong,{children:"restart your PlugNmeet server"}),". Now, all events will be sent to your specified URL."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-2-secure-your-endpoint-with-signature-validation",children:"Step 2: Secure Your Endpoint with Signature Validation"}),"\n",(0,i.jsxs)(n.p,{children:["Before processing any data, you ",(0,i.jsx)(n.strong,{children:"must"})," verify that the webhook request is genuinely from your Plug-N-Meet server. An unprotected endpoint can be exploited by anyone on the internet."]}),"\n",(0,i.jsxs)(n.p,{children:["Plug-N-Meet uses a JWT-based signature in the ",(0,i.jsx)(n.code,{children:"Authorization"})," header to secure webhooks. The process is:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Verify the JWT token using your ",(0,i.jsx)(n.code,{children:"API_SECRET"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Calculate a SHA256 hash of the raw request body."}),"\n",(0,i.jsxs)(n.li,{children:["Compare your calculated hash with the ",(0,i.jsx)(n.code,{children:"sha256"})," claim inside the verified token."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Here\u2019s how to implement this in a Node.js/Express middleware."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// You'll need these packages: npm install express body-parser jsonwebtoken crypto\nimport express from 'express';\nimport bodyParser from 'body-parser';\nimport jwt from 'jsonwebtoken';\nimport crypto from 'crypto';\n\nconst app = express();\nconst API_SECRET = 'YOUR_PLUGNMEET_API_SECRET'; // Use environment variables in production!\n\n// We need the raw body for hash comparison, so we use a custom verify function.\napp.use(bodyParser.json({\n  type: 'application/webhook+json',\n  verify: (req, res, buf) => {\n    req.rawBody = buf.toString();\n  }\n}));\n\n// The validation middleware\nfunction validateRequest(req, res, next) {\n  const token = req.header('Authorization');\n  if (!token) {\n    return res.status(401).send('Authorization header missing');\n  }\n\n  try {\n    // 1. Verify the JWT\n    const decoded = jwt.verify(token, API_SECRET);\n\n    // 2. Hash the raw request body\n    const sha256 = crypto.createHash('sha256');\n    sha256.update(req.rawBody);\n    const hash = sha256.digest('hex');\n\n    // 3. Compare hashes\n    if (decoded.sha256 !== hash) {\n      throw new Error('Signature hash does not match');\n    }\n\n    // Success! Proceed to the main handler.\n    next();\n  } catch (err) {\n    console.error('Webhook validation failed:', err.message);\n    return res.status(403).send('Invalid signature');\n  }\n}\n\n// Apply the middleware to your listener route.\napp.post('/webhook-listener', validateRequest, (req, res) => {\n  console.log('Webhook received and validated!');\n  handleWebhook(req.body);\n  res.status(200).send('OK');\n});\n\napp.listen(3000, () => {\n  console.log('Webhook listener started on port 3000');\n});\n\n// We'll define handleWebhook in the next step.\nfunction handleWebhook(payload) {\n  // ...\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"step-3-handle-different-events",children:"Step 3: Handle Different Events"}),"\n",(0,i.jsxs)(n.p,{children:["Now that our endpoint is secure, we can safely process the incoming data. We'll create our ",(0,i.jsx)(n.code,{children:"handleWebhook"})," function to inspect the ",(0,i.jsx)(n.code,{children:"event"})," property and act accordingly."]}),"\n",(0,i.jsx)(n.h4,{id:"use-case-1-basic-billing--analytics",children:"Use Case 1: Basic Billing & Analytics"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"session_ended"})," event is perfect for this. It fires when the last participant leaves and includes ",(0,i.jsx)(n.code,{children:"creation_time"})," and ",(0,i.jsx)(n.code,{children:"ended_time"})," timestamps."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"function handleWebhook(payload) {\n  switch (payload.event) {\n    case 'session_ended':\n      const room = payload.room;\n      const durationInSeconds = room.ended_time - room.creation_time;\n      const durationInMinutes = Math.ceil(durationInSeconds / 60);\n      console.log(`SUCCESS: Room '${room.room_id}' lasted for ${durationInMinutes} minutes.`);\n      // In a real application, you would save this to your database.\n      break;\n\n    case 'artifact_created':\n      handleArtifact(payload.room_artifact);\n      break;\n  }\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"use-case-2-advanced-ai-cost--usage-tracking",children:"Use Case 2: Advanced AI Cost & Usage Tracking"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"artifact_created"})," event fires whenever an AI service generates a result. The key is to inspect the ",(0,i.jsx)(n.code,{children:"room_artifact.type"})," and the nested ",(0,i.jsx)(n.code,{children:"metadata"})," object."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// A mapping from the enum number to a human-readable string.\nconst ArtifactType = {\n  2: 'MEETING_SUMMARY',\n  5: 'SPEECH_TRANSCRIPTION_USAGE',\n  8: 'AI_TEXT_CHAT_INTERACTION_USAGE',\n  7: 'CHAT_TRANSLATION_USAGE',\n};\n\nfunction handleArtifact(artifact) {\n  const artifactType = ArtifactType[artifact.type] || 'UNKNOWN';\n  console.log(`Processing artifact of type: ${artifactType}`);\n\n  switch (artifactType) {\n    case 'MEETING_SUMMARY':\n      if (artifact.metadata && artifact.metadata.file_info) {\n        console.log(`New summary available at: ${artifact.metadata.file_info.file_path}`);\n      }\n      break;\n    \n    case 'SPEECH_TRANSCRIPTION_USAGE':\n      if (artifact.metadata && artifact.metadata.duration_usage) {\n        const usage = artifact.metadata.duration_usage;\n        console.log(`Transcription usage: ${usage.duration_sec} seconds.`);\n        console.log(`Estimated Cost: $${usage.duration_sec_estimated_cost.toFixed(4)}`);\n      }\n      break;\n\n    case 'AI_TEXT_CHAT_INTERACTION_USAGE':\n      if (artifact.metadata && artifact.metadata.token_usage) {\n        const usage = artifact.metadata.token_usage;\n        console.log(`AI Chat usage: ${usage.total_tokens} tokens.`);\n        console.log(`Estimated Cost: $${usage.total_tokens_estimated_cost.toFixed(4)}`);\n      }\n      break;\n  }\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsxs)(n.p,{children:["That's it! You've just built a ",(0,i.jsx)(n.strong,{children:"secure"})," webhook handler that can intelligently process different types of events. Security is not optional when handling webhooks, and by validating the signature on every request, you ensure your application is safe from bad actors."]}),"\n",(0,i.jsx)(n.p,{children:"From here, you can easily extend this logic to build a sophisticated, real-time billing and analytics system, knowing your endpoint is properly protected."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Ready to start automating?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Explore the complete ",(0,i.jsx)(n.a,{href:"/docs/others/webhooks",children:"Webhooks Documentation"})]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Review the full ",(0,i.jsx)(n.a,{href:"/docs/api/intro",children:"API Introduction"})]})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsxs)(n.strong,{children:["Get more ideas from our post on ",(0,i.jsx)(n.a,{href:"/blog/powerful-workflows-with-webhooks",children:"5 Powerful Workflows"})]})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},77365:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var o=t(57140);const i={},a=o.createContext(i);function s(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(a.Provider,{value:n},e.children)}},81336:e=>{e.exports=JSON.parse('{"permalink":"/blog/how-to-build-your-first-webhook-workflow","editUrl":"https://github.com/mynaparrot/plugNmeet-docs/edit/main/blog/2026-01-17-how-to-build-workflows-with-webhooks.md","source":"@site/blog/2026-01-17-how-to-build-workflows-with-webhooks.md","title":"A Developer\'s Guide: How to Build Your First Automated Workflow with Webhooks","description":"You\'ve set up your video conferencing service, but now you want to make it smarter. What if you could automatically log the duration of every meeting for billing? Or get a Slack notification when a VIP joins a call? This is where webhooks come in.","date":"2026-01-17T00:00:00.000Z","tags":[{"inline":true,"label":"tutorial","permalink":"/blog/tags/tutorial"},{"inline":true,"label":"how-to","permalink":"/blog/tags/how-to"},{"inline":true,"label":"webhooks","permalink":"/blog/tags/webhooks"},{"inline":true,"label":"automation","permalink":"/blog/tags/automation"},{"inline":true,"label":"developer","permalink":"/blog/tags/developer"},{"inline":true,"label":"api","permalink":"/blog/tags/api"},{"inline":true,"label":"integration","permalink":"/blog/tags/integration"},{"inline":true,"label":"security","permalink":"/blog/tags/security"}],"readingTime":4.39,"hasTruncateMarker":true,"authors":[{"name":"Bob Teng","title":"Developer Advocate","url":"https://github.com/wbobteng","imageURL":"https://github.com/wbobteng.png","key":"bob","page":null},{"name":"Jibon L. Costa","title":"Founding developer","url":"https://github.com/jibon57","imageURL":"https://github.com/jibon57.png","key":"jibon","page":null}],"frontMatter":{"title":"A Developer\'s Guide: How to Build Your First Automated Workflow with Webhooks","slug":"how-to-build-your-first-webhook-workflow","authors":["bob","jibon"],"tags":["tutorial","how-to","webhooks","automation","developer","api","integration","security"]},"unlisted":false,"nextItem":{"title":"From Link to Live in 5 Seconds: How to Build a Frictionless Video Platform","permalink":"/blog/how-to-build-frictionless-browser-based-video-platform"}}')}}]);