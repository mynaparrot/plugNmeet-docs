"use strict";(self.webpackChunkplugnmeet_documentation=self.webpackChunkplugnmeet_documentation||[]).push([[7308],{686:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"others/webhooks","title":"Webhooks Guide | plugNmeet Developer Docs","description":"A guide to using plugNmeet webhooks to receive real-time notifications about events in your video conference rooms, such as \'session-started\' or \'user-joined\'.","source":"@site/docs/others/webhooks.md","sourceDirName":"others","slug":"/others/webhooks","permalink":"/docs/others/webhooks","draft":false,"unlisted":false,"editUrl":"https://github.com/mynaparrot/plugNmeet-docs/edit/main/docs/others/webhooks.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Webhooks Guide | plugNmeet Developer Docs","description":"A guide to using plugNmeet webhooks to receive real-time notifications about events in your video conference rooms, such as \'session-started\' or \'user-joined\'.","keywords":["webhook","webhooks","events","real-time","notifications","api","developer"],"sidebar_position":2,"sidebar_label":"Webhooks"},"sidebar":"tutorialSidebar","previous":{"title":"Analytics","permalink":"/docs/others/analytics"}}');var i=o(5656),a=o(7365);const r={title:"Webhooks Guide | plugNmeet Developer Docs",description:"A guide to using plugNmeet webhooks to receive real-time notifications about events in your video conference rooms, such as 'session-started' or 'user-joined'.",keywords:["webhook","webhooks","events","real-time","notifications","api","developer"],sidebar_position:2,sidebar_label:"Webhooks"},s="Webhooks",d={},c=[{value:"Receiving Webhooks",id:"receiving-webhooks",level:2},{value:"Events",id:"events",level:2},{value:"Room Created",id:"room-created",level:3},{value:"Room Started",id:"room-started",level:3},{value:"Room Finished",id:"room-finished",level:3},{value:"Participant Joined",id:"participant-joined",level:3},{value:"Participant Left",id:"participant-left",level:3},{value:"Track Published",id:"track-published",level:3},{value:"Track Unpublished",id:"track-unpublished",level:3},{value:"Recording Started",id:"recording-started",level:3},{value:"Recording Ended",id:"recording-ended",level:3},{value:"Recording Proceeded",id:"recording-proceeded",level:3},{value:"RTMP Started",id:"rtmp-started",level:3},{value:"RTMP Ended",id:"rtmp-ended",level:3},{value:"Artifact Created",id:"artifact-created",level:3},{value:"Analytics Proceeded",id:"analytics-proceeded",level:3},{value:"Example Webhook Handler",id:"example-webhook-handler",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,i.jsx)(n.p,{children:"Plug-N-Meet can notify your application about various events by sending webhook requests to a specified URL. You can configure this URL in the server settings or provide it when creating a room."}),"\n",(0,i.jsx)(n.h2,{id:"receiving-webhooks",children:"Receiving Webhooks"}),"\n",(0,i.jsxs)(n.p,{children:["Webhook requests are sent as HTTP POST requests to the URLs you have configured, either in the server's ",(0,i.jsx)(n.code,{children:"config.yml"})," file or during room creation. Each webhook event is encoded as JSON and included in the request body."]}),"\n",(0,i.jsxs)(n.p,{children:["The request will have the ",(0,i.jsx)(n.code,{children:"Content-Type"})," header set to ",(0,i.jsx)(n.code,{children:"application/webhook+json"}),". Make sure your web server is configured to accept payloads with this content type."]}),"\n",(0,i.jsxs)(n.p,{children:["Plug-N-Meet uses the same security pattern as LiveKit. To verify that webhook requests originate from Plug-N-Meet, each request includes ",(0,i.jsx)(n.code,{children:"Authorization"})," and ",(0,i.jsx)(n.code,{children:"Hash-Token"})," headers containing a signed JWT token. The token includes a SHA256 hash of the payload. For a PHP example, see ",(0,i.jsx)(n.a,{href:"https://github.com/mynaparrot/plugNmeet-sdk-php/blob/main/examples/webhook.php",children:"webhook.php"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,i.jsxs)(n.p,{children:["You can review the event definitions ",(0,i.jsx)(n.a,{href:"https://github.com/mynaparrot/plugnmeet-protocol/blob/main/proto_files/plugnmeet_common.proto#L10",children:"here"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"All webhook events include the following fields:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"id"}),": A UUID identifying the event"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"createdAt"}),": UNIX timestamp in seconds"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"room-created",children:"Room Created"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_created'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"room-started",children:"Room Started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_started'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"room-finished",children:"Room Finished"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'room_finished'\n  room: Room\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"participant-joined",children:"Participant Joined"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'participant_joined'\n  room: Room\n  participant: ParticipantInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"participant-left",children:"Participant Left"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'participant_left'\n  room: Room\n  participant: ParticipantInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"track-published",children:"Track Published"}),"\n",(0,i.jsxs)(n.p,{children:["Only ",(0,i.jsx)(n.code,{children:"sid"}),", ",(0,i.jsx)(n.code,{children:"identity"}),", and ",(0,i.jsx)(n.code,{children:"name"})," are included in the Room and Participant objects."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'track_published'\n  room: Room\n  participant: ParticipantInfo\n  track: TrackInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"track-unpublished",children:"Track Unpublished"}),"\n",(0,i.jsxs)(n.p,{children:["Only ",(0,i.jsx)(n.code,{children:"sid"}),", ",(0,i.jsx)(n.code,{children:"identity"}),", and ",(0,i.jsx)(n.code,{children:"name"})," are included in the Room and Participant objects."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'track_unpublished'\n  room: Room\n  participant: ParticipantInfo\n  track: TrackInfo\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-started",children:"Recording Started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'start_recording'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-ended",children:"Recording Ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'end_recording'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"recording-proceeded",children:"Recording Proceeded"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'recording_proceeded'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rtmp-started",children:"RTMP Started"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'start_rtmp'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rtmp-ended",children:"RTMP Ended"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'end_rtmp'\n  room: Room\n  recording_info: RecordingInfoEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"artifact-created",children:"Artifact Created"}),"\n",(0,i.jsx)(n.p,{children:"This single, unified event is triggered whenever a new artifact is generated by the system, such as a transcription or a meeting summary. It replaces multiple older, individual webhooks with a more flexible and scalable model."}),"\n",(0,i.jsxs)(n.p,{children:["For details on the payload structure and possible artifact types, please refer to the ",(0,i.jsx)(n.a,{href:"https://github.com/mynaparrot/plugnmeet-protocol/blob/main/proto_files/plugnmeet_room_artifacts.proto#L91",children:"protobuf definition"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'artifact_created'\n  room: Room\n  room_artifact: RoomArtifactWebhookEvent\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"analytics-proceeded",children:"Analytics Proceeded"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"interface CommonNotifyEvent {\n  event: 'analytics_proceeded'\n  room: Room\n  analytics: AnalyticsEvent\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"example-webhook-handler",children:"Example Webhook Handler"}),"\n",(0,i.jsxs)(n.p,{children:["The following pseudo-code demonstrates how to handle incoming webhooks. Your application should inspect the ",(0,i.jsx)(n.code,{children:"event"})," property to determine what action to take. The ",(0,i.jsx)(n.code,{children:"artifact_created"})," event is special, as it requires checking a nested ",(0,i.jsx)(n.code,{children:"type"})," field to understand the payload."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// A mapping from the enum number to a human-readable string.\n// See the protobuf definition for the complete, up-to-date list.\nconst ArtifactType = {\n  0: \'UNKNOWN_ARTIFACT\',\n  2: \'MEETING_SUMMARY\',\n  4: \'SPEECH_TRANSCRIPTION\',\n  5: \'SPEECH_TRANSCRIPTION_USAGE\',\n};\n\nfunction handleWebhook(payload) {\n  console.log(`Received event: ${payload.event}`);\n  const roomInfo = payload.room;\n\n  switch (payload.event) {\n    case \'room_started\':\n      console.log(`Room \'${roomInfo.name}\' has started.`);\n      break;\n\n    case \'participant_joined\':\n      console.log(`User \'${payload.participant.name}\' joined room \'${roomInfo.name}\'.`);\n      break;\n\n    case \'artifact_created\':\n      handleArtifactCreated(payload);\n      break;\n      \n    case \'room_finished\':\n      console.log(`Room \'${roomInfo.name}\' has finished.`);\n      break;\n\n    default:\n      console.log(`Received an unhandled event: ${payload.event}`);\n  }\n}\n\n// A dedicated handler for the \'artifact_created\' event\nfunction handleArtifactCreated(payload) {\n  const artifact = payload.room_artifact;\n  const artifactType = ArtifactType[artifact.type] || \'UNKNOWN_ARTIFACT\';\n  \n  console.log(`A new artifact of type \'${artifactType}\' was created.`);\n\n  switch (artifactType) {\n    case \'MEETING_SUMMARY\':\n    case \'SPEECH_TRANSCRIPTION\':\n      // These are file-based artifacts.\n      if (artifact.metadata && artifact.metadata.file_info) {\n        const fileInfo = artifact.metadata.file_info;\n        console.log(`File available at: ${fileInfo.file_path}`);\n        // Your logic here: e.g., download the file, link it to a recording.\n      }\n      break;\n      \n    case \'SPEECH_TRANSCRIPTION_USAGE\':\n      // This is a usage-based artifact.\n      if (artifact.metadata && artifact.metadata.duration_usage) {\n        const usage = artifact.metadata.duration_usage;\n        console.log(`Transcription usage logged: ${usage.duration_sec} seconds.`);\n        // Your logic here: e.g., update billing records.\n      }\n      break;\n      \n    default:\n      console.log(`Received an unhandled artifact type: ${artifactType}`);\n  }\n}\n\n// Example incoming payload for \'artifact_created\' (a meeting summary)\nconst samplePayload = {\n  "event": "artifact_created",\n  "id": "EV_abc123",\n  "createdAt": 1761815000,\n  "room": {\n    "sid": "RM_zG9e4bY2pD-1761814595173",\n    "room_id": "room01",\n    "name": "Test Room"\n  },\n  "room_artifact": {\n    "type": 2, // Corresponds to MEETING_SUMMARY\n    "artifact_id": "ART_xyz789",\n    "metadata": {\n      "file_info": {\n        "file_path": "/path/to/summary.txt",\n        "file_size": 1024,\n        "mime_type": "text/plain"\n      }\n    }\n  }\n};\n\n// You would call your handler with the body of the POST request.\nhandleWebhook(samplePayload);\n'})})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},7365:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>s});var t=o(7140);const i={},a=t.createContext(i);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);