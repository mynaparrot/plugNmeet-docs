<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-developer-guide/scalable-setup" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Scalable/Distributed setup | plugNmeet | Open Source Web Conferencing System</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.plugnmeet.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.plugnmeet.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.plugnmeet.org/docs/developer-guide/scalable-setup"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="webrtc, self-hosted, on-premise, open source, video conferencing, web conference, video call, video chat, online meetings, webinar, zoom alternative, jitsi alternative, BigBlueButton alternative, wordpress webrtc, joomla webrtc, moodle webrtc, online class, free webrtc, video conferencing api, video conferencing sdk"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Scalable/Distributed setup | plugNmeet | Open Source Web Conferencing System"><meta data-rh="true" name="description" content="plugNmeet Scalable/Distributed setup"><meta data-rh="true" property="og:description" content="plugNmeet Scalable/Distributed setup"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://www.plugnmeet.org/docs/developer-guide/scalable-setup"><link data-rh="true" rel="alternate" href="https://www.plugnmeet.org/docs/developer-guide/scalable-setup" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.plugnmeet.org/docs/developer-guide/scalable-setup" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Scalable/Distributed setup","item":"https://www.plugnmeet.org/docs/developer-guide/scalable-setup"}]}</script><link rel="stylesheet" href="/assets/css/styles.1eed41f0.css">
<script src="/assets/js/runtime~main.c57f7ea9.js" defer="defer"></script>
<script src="/assets/js/main.66684c5d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_eU5T" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="plugNmeet" class="themedComponent_hVu4 themedComponent--light_gJJA"><img src="/img/logo.png" alt="plugNmeet" class="themedComponent_hVu4 themedComponent--dark_dvGK"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/user-guide/overview">User Guide</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/api/intro">API</a><a href="https://www.plugnmeet.cloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Cloud<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a><a href="https://plugnmeet.medium.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a><a href="https://demo.plugnmeet.com/landing.html" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Demo<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/mynaparrot/plugNmeet-server" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_Lma2 colorModeToggle_NtvO"><button class="clean-btn toggleButton_bafp toggleButtonDisabled_DYgP" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CtSd lightToggleIcon_ySed"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CtSd darkToggleIcon_H21A"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_CtSd systemToggleIcon_TSwt"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_XK1X"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_X3Ek"><div class="docsWrapper_HA8f"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton__IYF" type="button"></button><div class="docRoot_B_hu"><aside class="theme-doc-sidebar-container docSidebarContainer_pluI"><div class="sidebarViewport_k6Dt"><div class="sidebar_ICQk"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_eX3T"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/firewall">Ports &amp; Firewall</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/installation">Installation Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/user-guide/overview">User Guide</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-guide/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-guide/moderator">Moderator Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-guide/attendee">Attendee Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-guide/wordPress-integration">WordPress Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-guide/moodle-integration">Moodle Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-guide/joomla-integration">Joomla Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/user-guide/lti">LTI Integration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/developer-guide/intro">Developer Guide</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-guide/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-guide/setup-development">Setting up for development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/developer-guide/design-customisation">Design Customisation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/developer-guide/scalable-setup">Scalable/Distributed setup</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tutorials/quick_php">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/api/intro">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/others/analytics">Others</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_MGJe"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Jc0X"><div class="docItemContainer_tuh3"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_lfcY" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YJmT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Developer Guide</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Scalable/Distributed setup</span></li></ul></nav><div class="tocCollapsible_vVN2 theme-doc-toc-mobile tocMobile_Z8r8"><button type="button" class="clean-btn tocCollapsibleButton_YHEY">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Scalable/Distributed setup</h1></header>
<p>plugNmeet allows you to install its components on multiple servers. We&#x27;ll go over it in this article.</p>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="servers">Servers<a href="#servers" class="hash-link" aria-label="Direct link to Servers" title="Direct link to Servers">​</a></h2>
<p>I&#x27;m assuming we&#x27;ve following servers. You can have any number based on your requirements. For the services of Redis, MariaDB, and NFS, we will use a third-party provider. If you&#x27;d like, you can set up your own, but we won&#x27;t go into that setup in this article.</p>
<table><thead><tr><th style="text-align:left">Component</th><th>IPs</th><th>Ports</th><th style="text-align:left">Domain</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><a href="https://github.com/mynaparrot/plugNmeet-server" target="_blank" rel="noopener noreferrer">plugNmeet-server</a></td><td>100.100.100.1<br>100.100.100.2</td><td>8080/tcp</td><td style="text-align:left">plugnmeet.example.com</td><td style="text-align:left">We&#x27;ll use 2 servers for plugNmeet. Ports open only for HAProxy,<strong>not public</strong></td></tr><tr><td style="text-align:left"><a href="https://github.com/livekit/livekit" target="_blank" rel="noopener noreferrer">livekit</a></td><td>100.100.100.10<br> 100.100.100.11<br> 100.100.100.12</td><td>7880/tcp<br>7881/tcp<br>5349/tcp<br>50000-60000/udp</td><td style="text-align:left">livekit.example.com<br>turn.example.com</td><td style="text-align:left">We&#x27;ll use 3 servers for livekit. 7880/tcp &amp; 5349/tcp open only for HAProxy, <strong>not public</strong>. 7881/tcp &amp; 50000-60000/udp <strong>open for public</strong></td></tr><tr><td style="text-align:left"><a href="https://github.com/mynaparrot/plugNmeet-recorder" target="_blank" rel="noopener noreferrer">plugNmeet-recorder</a></td><td>100.100.100.20<br> 100.100.100.21 <br>100.100.100.22</td><td></td><td style="text-align:left">n/a</td><td style="text-align:left">We&#x27;ll use 3 servers for recorder. Recorder doesn&#x27;t need any port.</td></tr><tr><td style="text-align:left"><a href="https://github.com/mynaparrot/plugNmeet-etherpad" target="_blank" rel="noopener noreferrer">plugNmeet-etherpad</a></td><td>100.100.100.30</td><td>9001/tcp</td><td style="text-align:left">ether.example.com</td><td style="text-align:left">We&#x27;ll use 1 servers for etherpad. 9001/tcp open only for HAProxy, not public.</td></tr><tr><td style="text-align:left">HAProxy</td><td>100.100.100.35</td><td>80/tcp<br>443/tcp</td><td style="text-align:left">n/a</td><td style="text-align:left">We&#x27;ll install HAProxy in one server. Both ports are open for public</td></tr><tr><td style="text-align:left">Mariadb</td><td>100.100.100.40</td><td></td><td style="text-align:left">n/a</td><td style="text-align:left">We&#x27;ve a Mariadb cluster from provider</td></tr><tr><td style="text-align:left">Redis</td><td>100.100.100.50</td><td></td><td style="text-align:left">n/a</td><td style="text-align:left">We&#x27;ve a Redis cluster from provider</td></tr><tr><td style="text-align:left">NFS</td><td>100.100.100.60</td><td></td><td style="text-align:left">n/a</td><td style="text-align:left">We&#x27;ve a NFS storage from provider</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="os">OS<a href="#os" class="hash-link" aria-label="Direct link to OS" title="Direct link to OS">​</a></h2>
<p>We&#x27;ll use Ubuntu for all of above servers.</p>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="setup-docker">Setup docker<a href="#setup-docker" class="hash-link" aria-label="Direct link to Setup docker" title="Direct link to Setup docker">​</a></h2>
<p>We&#x27;ll use docker for <code>plugNmeet-server</code>, <code>livekit</code> and <code>plugNmeet-etherpad</code>. So, we can install docker for all of those servers</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update &amp;&amp; sudo apt -y install ca-certificates curl gnupg lsb-release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $(lsb_release -cs) stable&quot; | tee /etc/apt/sources.list.d/docker.list &gt;/dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update &amp;&amp; sudo apt -y install docker-ce docker-ce-cli containerd.io docker-compose</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="font-installation">Font installation<a href="#font-installation" class="hash-link" aria-label="Direct link to Font installation" title="Direct link to Font installation">​</a></h2>
<p>For <code>plugNmeet-server</code> and <code>plugNmeet-etherpad</code> servers</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update &amp;&amp; apt -y install --no-install-recommends \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-arkpandora \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-crosextra-carlito \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-crosextra-caladea \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-noto \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-noto-cjk \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-noto-core \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-noto-mono \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-noto-ui-core \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-liberation \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-dejavu \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-dejavu-extra \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-liberation \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-liberation2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-linuxlibertine \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-sil-gentium \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fonts-sil-gentium-basic \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fontconfig</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="setup-livekit">Setup livekit<a href="#setup-livekit" class="hash-link" aria-label="Direct link to Setup livekit" title="Direct link to Setup livekit">​</a></h2>
<p>Login to <code>livekit</code> server &amp; follow:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /opt/plugNmeet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/plugNmeet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch docker-compose.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch livekit.yaml</span><br></span></code></pre></div></div>
<p>Open <code>docker-compose.yaml</code> &amp; add:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  livekit:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: livekit/livekit-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    network_mode: &quot;host&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - .:/app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /etc/ssl/certs/:/etc/ssl/certs/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: --config &quot;/app/livekit.yaml&quot; --node-ip PUBLIC_IP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    healthcheck:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      test: wget --no-verbose --tries=5 --spider http://localhost:7880 || kill 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      interval: 20s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout: 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      retries: 5</span><br></span></code></pre></div></div>
<p>Change <code>PUBLIC_IP</code> with the public IP of this server.</p>
<p>Open <code>livekit.yaml</code> &amp; add:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">port: 7880</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rtc:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port_range_start: 50000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port_range_end: 60000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tcp_port: 7881</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  use_external_ip: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address: 100.100.100.50:6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  password: &quot;my-pass&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  db: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">room:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  auto_create: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">keys:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  LIVEKIT_API_KEY: LIVEKIT_SECRET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">webhook:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  api_key: LIVEKIT_API_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  urls:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;https://plugnmeet.example.com/webhook&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">turn:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  udp_port: 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tls_port: 5349</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  external_tls: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  domain: turn.example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>Replace <code>LIVEKIT_API_KEY</code>, <code>LIVEKIT_SECRET</code>, <code>turn.example.com</code>, <code>plugnmeet.example.com</code>, <code>redis</code> with correct info. You can generate <code>LIVEKIT_SECRET</code> by:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">cat /dev/urandom | tr -dc &#x27;a-zA-Z0-9&#x27; | fold -w 36 | head -n 1</span><br></span></code></pre></div></div>
<p>Make sure you&#x27;re using same information to <strong>all of your livekit server</strong>.
Start docker:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose up -d</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="setup-plugnmeet-etherpad">Setup plugNmeet-etherpad<a href="#setup-plugnmeet-etherpad" class="hash-link" aria-label="Direct link to Setup plugNmeet-etherpad" title="Direct link to Setup plugNmeet-etherpad">​</a></h2>
<p>Login to <code>etherpad</code> server &amp; follow:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /opt/plugNmeet/etherpad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /opt/plugNmeet/redis-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 777 /opt/plugNmeet/redis-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/plugNmeet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/mynaparrot/plugNmeet-install/main/install-files/settings.json -O etherpad/settings.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch etherpad/APIKEY.txt</span><br></span></code></pre></div></div>
<p>Open <code>docker-compose.yaml</code> &amp; add:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  redis:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: redis:6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    network_mode: &quot;host&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./redis-data:/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    healthcheck:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      test: &quot;redis-cli ping || kill 1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      interval: 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout: 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      retries: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  etherpad:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: mynaparrot/plugnmeet-etherpad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    network_mode: &quot;host&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./etherpad/APIKEY.txt:/opt/etherpad-lite/APIKEY.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - ./etherpad/settings.json:/opt/etherpad-lite/settings.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /usr/share/fonts/:/usr/share/fonts/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /etc/fonts/:/etc/fonts/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /usr/share/fontconfig/:/usr/share/fontconfig/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /var/cache/fontconfig/:/var/cache/fontconfig/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    depends_on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    healthcheck:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      test: curl -f --retry 5 --retry-delay 3 &quot;http://localhost:9001/api&quot; || kill 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      interval: 20s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout: 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      retries: 5</span><br></span></code></pre></div></div>
<p>Open <code>etherpad/APIKEY.txt</code> &amp; replace <code>ETHERPAD_API</code> with correct key. You can generate key by:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">cat /dev/urandom | tr -dc &#x27;a-zA-Z0-9&#x27; | fold -w 80 | head -n 1</span><br></span></code></pre></div></div>
<p>Start docker:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose up -d</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="setup-plugnmeet-server">Setup plugNmeet-server<a href="#setup-plugnmeet-server" class="hash-link" aria-label="Direct link to Setup plugNmeet-server" title="Direct link to Setup plugNmeet-server">​</a></h2>
<p>Login to <code>plugNmeet-server</code> server &amp; follow:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">sudo update &amp;&amp; sudo apt install --no-install-recommends -y wget libreoffice mupdf-tools</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /opt/plugNmeet/recording_files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/plugNmeet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch docker-compose.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">touch config.yaml</span><br></span></code></pre></div></div>
<p><a href="https://github.com/mynaparrot/plugNmeet-client" target="_blank" rel="noopener noreferrer">plugNmeet-client</a> configuration. Replace <code>plugnmeet.example.com</code> with correct domain.</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/mynaparrot/plugNmeet-client/releases/latest/download/client.zip -O client.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unzip client.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp client/dist/assets/config_sample.js client/dist/assets/config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -i &quot;s/window.PLUG_N_MEET_SERVER_URL.*/window.PLUG_N_MEET_SERVER_URL = &#x27;https:\/\/plugnmeet.example.com&#x27;\;/g&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client/dist/assets/config.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm client.zip</span><br></span></code></pre></div></div>
<p>Open <code>docker-compose.yaml</code> &amp; write:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">version: &quot;3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plugnmeet:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: mynaparrot/plugnmeet-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    network_mode: &quot;host&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - .:/app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /etc/ssl/certs/:/etc/ssl/certs/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /usr/share/fonts/:/usr/share/fonts/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /etc/fonts/:/etc/fonts/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /usr/share/fontconfig/:/usr/share/fontconfig/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /var/cache/fontconfig/:/var/cache/fontconfig/:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: --config &quot;/app/config.yaml&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    healthcheck:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      test: wget --no-verbose --tries=5 --spider http://localhost:8080 || kill 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      interval: 20s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      timeout: 1s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      retries: 5</span><br></span></code></pre></div></div>
<p>Open <code>config.yaml</code>. Latest contents can be found from either <a href="https://raw.githubusercontent.com/mynaparrot/plugNmeet-server/main/config_sample.yaml" target="_blank" rel="noopener noreferrer">here</a> or <a href="https://raw.githubusercontent.com/mynaparrot/plugNmeet-install/main/install-files/config.yaml" target="_blank" rel="noopener noreferrer">here</a></p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">client:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 8080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  debug: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: &quot;/app/client/dist&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ## this will require during authentication. Use random secret.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # openssl rand -hex 32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # OR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # cat /dev/urandom | tr -dc &#x27;a-zA-Z0-9&#x27; | fold -w 36 | head -n 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  api_key: PLUG_N_MEET_API_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  secret: PLUG_N_MEET_SECRET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  webhook_conf:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # enable webhook. This will post response for different events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # set url bellow. This will be use as global.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # this is optional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url: &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # During create room you can set custom hook URL too.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # if you set enable_for_per_meeting: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # then extra post response will send in that address too</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable_for_per_meeting: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prometheus:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics_path: &quot;/metrics&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  proxy_header: &quot;X-Forwarded-For&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log_settings:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  log_file: &quot;/app/log/plugNmeet.log&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # maxsize of log file in MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  maxsize: 20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  maxbackups: 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # max age of log before rotate in days</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  maxage: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">livekit_info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  host: &quot;https://livekit.example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  api_key: LIVEKIT_API_KEY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  secret: LIVEKIT_SECRET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # value in minutes. Default 10 minutes. Client will renew token automatically</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  token_validity: 10m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redis_info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  address: 100.100.100.50:6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  password: &quot;my-pass&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  db: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mysql_info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  host: 100.100.100.40</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  port: 3306</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  username: &quot;root&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  password: &quot;DB_ROOT_PASSWORD&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  db: &quot;plugnmeet&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prefix: &quot;pnm_&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">upload_file_settings:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  path: &quot;/app/upload&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # file size in MB. Default 50MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  max_size: 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # By default, files will be deleted as soon as the session will be finish.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # You can set it true to disable deleting files.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  keep_forever: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  allowed_types:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;jpg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;png&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;jpeg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;svg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;pdf&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;docx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;txt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;xlsx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;pptx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;zip&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;webm&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - &quot;mp3&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recorder_info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # this value should be same as recorder&#x27;s copy_to_dir path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  recording_files_path: &quot;/app/recording_files&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  token_validity: 30m</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shared_notepad:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enabled: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # multiple hosts can be added here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # server will be selected based on load</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # the value of id should be unique</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  etherpad_hosts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      id: &quot;node_01&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      host: &quot;https://ether.example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      api_key: &quot;ETHERPAD_API&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lti_info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  v1_tool_url: https://plugnmeet.example.com/lti/v1</span><br></span></code></pre></div></div>
<p>Replace <code>PLUG_N_MEET_API_KEY</code>, <code>PLUG_N_MEET_SECRET</code>,<code>LIVEKIT_API_KEY</code>, <code>LIVEKIT_SECRET</code>, <code>turn.example.com</code>, <code>plugnmeet.example.com</code>, <code>redis</code>, <code>ether.example.com</code>, <code>ETHERPAD_API</code>, <code>mysql_info</code> with correct info. You can generate <code>PLUG_N_MEET_SECRET</code> by:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">cat /dev/urandom | tr -dc &#x27;a-zA-Z0-9&#x27; | fold -w 36 | head -n 1</span><br></span></code></pre></div></div>
<p>Make sure you&#x27;re using same information to <strong>all of your plugNmeet server</strong>.
Start docker:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose up -d</span><br></span></code></pre></div></div>
<p>We&#x27;ll mount <code>NFS</code> server into <code>/opt/plugNmeet/recording_files</code></p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install nfs-common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount 100.100.100.60:/recording_files /opt/plugNmeet/recording_files</span><br></span></code></pre></div></div>
<p>To make it permanent by adding in <code>/etc/fstab</code></p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">100.100.100.60:/recording_files    /opt/plugNmeet/recording_files   nfs4    noauto  0  0</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="setup-plugnmeet-recorder">Setup plugNmeet-recorder<a href="#setup-plugnmeet-recorder" class="hash-link" aria-label="Direct link to Setup plugNmeet-recorder" title="Direct link to Setup plugNmeet-recorder">​</a></h2>
<p>Login to <code>plugNmeet-recorder</code> server &amp; follow:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /opt/plugNmeet/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd /opt/plugNmeet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -sS -o - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main&quot; &gt;/etc/apt/sources.list.d/google-chrome.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## prepare nodejs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## install require software</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update &amp;&amp; sudo apt -y install nodejs xvfb google-chrome-stable ffmpeg unzip</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/mynaparrot/plugNmeet-install/main/install-files/plugnmeet-recorder.service -O /etc/systemd/system/plugnmeet-recorder.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/mynaparrot/plugNmeet-install/main/install-files/plugnmeet-recorder@main.service -O /etc/systemd/system/plugnmeet-recorder@main.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/mynaparrot/plugNmeet-install/main/install-files/plugnmeet-recorder@websocket.service -O /etc/systemd/system/plugnmeet-recorder@websocket.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl enable plugnmeet-recorder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl enable plugnmeet-recorder@main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl enable plugnmeet-recorder@websocket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/mynaparrot/plugNmeet-recorder/releases/latest/download/recorder.zip -O recorder.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unzip recorder.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp recorder/config_sample.yaml recorder/config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install --ignore-scripts --production -C recorder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm recorder.zip</span><br></span></code></pre></div></div>
<p>Now open <code>recorder/config.yaml</code> &amp; replace <code>PLUG_N_MEET_SERVER_DOMAIN</code>, <code>PLUG_N_MEET_API_KEY</code>, <code>PLUG_N_MEET_SECRET</code> &amp; <code>redis</code> info. Make sure you&#x27;re using same info as above setups into all recording servers.</p>
<p><strong>Note: Make sure <code>id</code> and <code>sub_path</code> info is unique for each server.</strong> For example: server 1 <code>node_01</code>; server 2 <code>node_02</code>; server 3 <code>node_03</code> .....</p>
<p><code>WEBSOCKET_AUTH_TOKEN</code> can be generate by:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">cat /dev/urandom | tr -dc &#x27;a-zA-Z0-9&#x27; | fold -w 10 | head -n 1</span><br></span></code></pre></div></div>
<p>We&#x27;ll mount <code>NFS</code> server into <code>/opt/plugNmeet/recording_files</code></p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install nfs-common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount 100.100.100.60:/recording_files /opt/plugNmeet/recording_files</span><br></span></code></pre></div></div>
<p>To make it permanent by adding in <code>/etc/fstab</code></p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">100.100.100.60:/recording_files    /opt/plugNmeet/recording_files   nfs4    noauto  0  0</span><br></span></code></pre></div></div>
<p>Now start server:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start plugnmeet-recorder</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_xiaG" id="setup-haproxy">Setup HAProxy<a href="#setup-haproxy" class="hash-link" aria-label="Direct link to Setup HAProxy" title="Direct link to Setup HAProxy">​</a></h2>
<p>Login to your HAProxy server &amp; follow:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">apt update &amp;&amp; apt install -y --no-install-recommends software-properties-common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">add-apt-repository ppa:vbernat/haproxy-2.6 -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apt -y update &amp;&amp; apt install -y haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service haproxy stop</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">cp /etc/haproxy/haproxy.cfg /etc/haproxy/haproxy.cfg_bk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /etc/haproxy/ssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/mynaparrot/plugNmeet-install/main/install-files/haproxy_lets_encrypt.cfg -O /etc/haproxy/haproxy.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service haproxy start</span><br></span></code></pre></div></div>
<p>Configure lets encrypt. Make sure replace with correct info:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">apt install -y snapd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">snap install core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">snap refresh core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">snap install --classic certbot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ln -s /snap/bin/certbot /usr/bin/certbot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">certbot certonly --standalone -d PLUG_N_MEET_SERVER_DOMAIN -d TURN_SERVER_DOMAIN \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-d ETHERPAD_SERVER_DOMAIN -d LIVEKIT_SERVER_DOMAIN \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--non-interactive --agree-tos --email YOUR_EMAIL \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--http-01-port=9080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ln -s /etc/letsencrypt/live/PLUG_N_MEET_SERVER_DOMAIN/fullchain.pem /etc/haproxy/ssl/PLUG_N_MEET_SERVER_DOMAIN.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ln -s /etc/letsencrypt/live/PLUG_N_MEET_SERVER_DOMAIN/privkey.pem /etc/haproxy/ssl/PLUG_N_MEET_SERVER_DOMAIN.pem.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl dhparam -out /etc/haproxy/dhparams-2048.pem 2048</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/mynaparrot/plugNmeet-install/main/install-files/001-restart-haproxy -O /etc/letsencrypt/renewal-hooks/post/001-restart-haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x /etc/letsencrypt/renewal-hooks/post/001-restart-haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">service haproxy stop</span><br></span></code></pre></div></div>
<p>Now edit <code>/etc/haproxy/haproxy.cfg</code> as bellow:</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">global</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	log /dev/log	local0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	log /dev/log	local1 notice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	chroot /var/lib/haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	stats timeout 30s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	user haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	group haproxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	daemon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	# Default SSL material locations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ca-base /etc/ssl/certs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	crt-base /etc/ssl/private</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ssl-dh-param-file /etc/haproxy/dhparams-2048.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	# See: https://ssl-config.mozilla.org/#server=haproxy&amp;server-version=2.0.3&amp;config=intermediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl-default-bind-ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl-default-bind-ciphersuites TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ssl-default-bind-options ssl-min-ver TLSv1.2 no-tls-tickets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">defaults</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	log	global</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	mode	http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	#option	httplog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	option	dontlognull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout connect 5000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout client  50000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    timeout server  50000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default-server init-addr last,libc,none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	errorfile 400 /etc/haproxy/errors/400.http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	errorfile 403 /etc/haproxy/errors/403.http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	errorfile 408 /etc/haproxy/errors/408.http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	errorfile 500 /etc/haproxy/errors/500.http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	errorfile 502 /etc/haproxy/errors/502.http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	errorfile 503 /etc/haproxy/errors/503.http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	errorfile 504 /etc/haproxy/errors/504.http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frontend frontend-http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bind :80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mode http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ACL for detecting Let&#x27;s Encrypt validation requests</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    acl is_certbot path_beg /.well-known/acme-challenge/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_backend backend-certbot if is_certbot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## without acme-challenge we&#x27;ll redirect to https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## because our service won&#x27;t work on non-ssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    http-request redirect scheme https if ! is_certbot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## by default it will be certbot server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default_backend backend-certbot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend backend-certbot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mode http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server certbot 127.0.0.1:9080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">frontend ft_ssl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mode tcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # HAProxy will take the fitting certificate from the available ones</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bind *:443 ssl crt /etc/haproxy/ssl/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tcp-request inspect-delay 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tcp-request content accept if { req_ssl_hello_type 1 }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Pass TURN requests to LiveKit Turn server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # LiveKit expects unencrypted traffic on tls_port,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # and still advertise tls_port as a TURN/TLS candidate.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_backend bk_livekit_turn  if { ssl_fc_sni -i TURN_SERVER_DOMAIN }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_backend bk_livekit  if { ssl_fc_sni -i LIVEKIT_SERVER_DOMAIN }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_backend bk_etherpad  if { ssl_fc_sni -i ETHERPAD_SERVER_DOMAIN }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ## default will be bk_plugnmeet_server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default_backend bk_plugnmeet_server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend bk_livekit_turn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mode tcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s1 100.100.100.10:5349 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s2 100.100.100.11:5349 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s3 100.100.100.12:5349 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend bk_plugnmeet_server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mode http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    option forwardfor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Pass the requests to plugnmeet-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s1 100.100.100.1:8080 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s2 100.100.100.2:8080 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend bk_livekit_api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mode http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    option forwardfor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Pass the requests to the LiveKit HTTP API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s1 100.100.100.10:7880 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s2 100.100.100.11:7880 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s3 100.100.100.12:7880 check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backend bk_etherpad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mode http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    option forwardfor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Pass the requests to etherpad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server s1 100.100.100.30:9001 check</span><br></span></code></pre></div></div>
<p>Replace <code>TURN_SERVER_DOMAIN</code>, <code>LIVEKIT_SERVER_DOMAIN</code>, <code>ETHERPAD_SERVER_DOMAIN</code> with correct information</p>
<p>Now start haproxy</p>
<div class="language-bash codeBlockContainer_ujWm theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_jiEo"><pre tabindex="0" class="prism-code language-bash codeBlock_SwmV thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_T4vV"><span class="token-line" style="color:#393A34"><span class="token plain">service start haproxy</span><br></span></code></pre></div></div>
<p>Now using <a href="https://github.com/mynaparrot/plugNmeet-client" target="_blank" rel="noopener noreferrer">client</a> you should be able to connect with <code>plugNmeet</code></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/mynaparrot/plugNmeet-docs/edit/main/docs/developer-guide/scalable-setup.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_HjFO" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ekPh"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/developer-guide/design-customisation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Design Customisation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorials/quick_php"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PHP Quick Start</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Rf9n thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#servers" class="table-of-contents__link toc-highlight">Servers</a></li><li><a href="#os" class="table-of-contents__link toc-highlight">OS</a></li><li><a href="#setup-docker" class="table-of-contents__link toc-highlight">Setup docker</a></li><li><a href="#font-installation" class="table-of-contents__link toc-highlight">Font installation</a></li><li><a href="#setup-livekit" class="table-of-contents__link toc-highlight">Setup livekit</a></li><li><a href="#setup-plugnmeet-etherpad" class="table-of-contents__link toc-highlight">Setup plugNmeet-etherpad</a></li><li><a href="#setup-plugnmeet-server" class="table-of-contents__link toc-highlight">Setup plugNmeet-server</a></li><li><a href="#setup-plugnmeet-recorder" class="table-of-contents__link toc-highlight">Setup plugNmeet-recorder</a></li><li><a href="#setup-haproxy" class="table-of-contents__link toc-highlight">Setup HAProxy</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Quick links</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/intro">API</a></li><li class="footer__item"><a href="https://www.plugnmeet.cloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cloud<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/mynaparrot/plugNmeet-server/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discord.gg/2X2ZaCHu4C" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord chat<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/mynaparrot/plugNmeet-server" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://plugnmeet.medium.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://demo.plugnmeet.com/landing.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Demo<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink__TZH"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 MynaParrot SL.</div></div></div></footer></div>
</body>
</html>